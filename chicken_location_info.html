<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8">
        <title>지진 알리미</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel = "stylesheet" href="layout.css">
        <link rel = "stylesheet" href="location_info.css"
        >
    </head>

    
<body>
        <div id = head>
             <!-- head 지진 알리미 클릭시 메인화면(=지진 위치 정보 검색)으로 이동  -->
            <a href ="chicken_location_info.html" > <b> 지진알리미</b></a>
            <!-- hr은 지진알리미 홈페이지 메인 제목 밑에 밑줄 -->     
            <hr width="100" size="3" text-align="center" noshade/> 
        </div>

        <div id="topMenu" >
            <a  id = "menu1" href="chicken_location_info.html"><b>지진 위치 정보 검색</b></a>
            <a id = "menu2" href="chicken_recent_location.html">최근 지진 발생지역</a>
            <a id = "menu3"href="chicken_shelter_info.html">지진 대피 요령 및 훈련 정보</a>
            <hr id = "undermenu" width="1000" size="3" color="palevioletred"  text-align="center" noshade/> 
        </div>

        <h2 id=maptitle>내 주변 지진 정보</h2> 
            <div id="map">
                <!-- <div id="map" style="width:100%;height:350px;"></div> -->

                    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=8bcd75a11f477d393c28161306464ea5&libraries=services,clusterer130"></script>
                    <script>
                    var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
                        mapOption = { 
                            center: new kakao.maps.LatLng(33.450701, 126.570667), // 지도의 중심좌표
                            level: 3 // 지도의 확대 레벨
                        };
                    // HTML5의 geolocation으로 사용할 수 있는지 확인합니다 
                    if (navigator.geolocation) {
                        
                        // GeoLocation을 이용해서 접속 위치를 얻어옵니다
                        navigator.geolocation.getCurrentPosition(function(position) {
                            
                            var lat = position.coords.latitude, // 위도
                                lon = position.coords.longitude; // 경도
                            
                            var locPosition = new kakao.maps.LatLng(lat, lon), // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
                                message = '<div style="padding:5px;">여기에 계신가요?!</div>'; // 인포윈도우에 표시될 내용입니다
                            
                            // 마커와 인포윈도우를 표시합니다
                            displayMarker(locPosition, message);
                                
                        });
                        
                    } else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
                        
                        var locPosition = new kakao.maps.LatLng(33.450701, 126.570667),    
                            message = 'geolocation을 사용할수 없어요..'
                            
                        displayMarker(locPosition, message);
                    }

                    // 지도에 마커와 인포윈도우를 표시하는 함수입니다
                    function displayMarker(locPosition, message) {

                        // 마커를 생성합니다
                        var marker = new kakao.maps.Marker({  
                            map: map, 
                            position: locPosition
                        }); 
                        
                        var iwContent = message, // 인포윈도우에 표시할 내용
                            iwRemoveable = true;

                        // 인포윈도우를 생성합니다
                        var infowindow = new kakao.maps.InfoWindow({
                            content : iwContent,
                            removable : iwRemoveable
                        });
                        
                        // 인포윈도우를 마커위에 표시합니다 
                        infowindow.open(map, marker);
                        
                        // 지도 중심좌표를 접속위치로 변경합니다
                        map.setCenter(locPosition);      
                    }    
                    var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다
                    
                    // 마커를 표시할 위치와 title 객체 배열입니다 
                    var positions = [
                        {
                            title: '서울특별시 강남구 논현2동 봉은사로43길 56', 
                            latlng: new kakao.maps.LatLng(37.512840, 127.039428),
                            lat:37.512840
                        },
                        {
                            title: '서울특별시 천호동 6 우성', 
                            latlng: new kakao.maps.LatLng(37.548017, 127.139105),
                            lat:37.548017
                        },
                        {
                            title: '서울특별시 강동구 암사동 암사5길', 
                            latlng: new kakao.maps.LatLng(37.552397, 127.132324),
                            lat:37.552397
                        },
                        {
                            title: '서울특별시 강동구 천호1동 219-12',
                            latlng: new kakao.maps.LatLng(37.544868, 127.135427),
                            lat:37.544868
                        },
                        {
                            title: '서울특별시 강동구 천호1동 18-184',
                            latlng: new kakao.maps.LatLng(37.548162, 127.139848),
                            lat:37.548162
                        },
                        {
                            title: '서울특별시 강동구 성내2동 144-36',
                            latlng: new kakao.maps.LatLng(37.534585, 127.127838),
                            lat:37.534585
                        },
                        {
                            title: '서울특별시 강동구 성내동 455-13 ',
                            latlng: new kakao.maps.LatLng(37.528050, 127.121014),
                            lat:37.528050
                        },
                        {
                            title: ' 서울특별시 송파구 잠실4동',
                            latlng: new kakao.maps.LatLng(37.521889, 127.113847),
                            lat:37.521889
                        },
                        {
                            title: ' 서울특별시 송파구 방이동 61-11번지 401호',
                            latlng: new kakao.maps.LatLng(37.513821, 127.109813),
                            lat:37.513821
                        },
                        {
                            title: '서울특별시 송파구 석촌동 165-5',
                            latlng: new kakao.maps.LatLng(37.506025, 127.103676),
                            lat:37.506025
                        },
                        {
                            title: '서울특별시 송파구 석촌동 242-9',
                            latlng: new kakao.maps.LatLng(37.499624, 127.100801),
                            lat:37.499624
                        },
                        {
                            title: '서울특별시 강남구 수서동 양재대로 781',
                            latlng: new kakao.maps.LatLng(37.492780, 127.094364),
                            lat:37.492780
                        },
                        {
                            title: '서울특별시 광진구 구의2동',
                            latlng: new kakao.maps.LatLng(37.557041, 127.105382),
                            lat:37.557041
                        },
                        {
                            title: '서울특별시 광진구 워커힐로',
                            latlng: new kakao.maps.LatLng(37.551461, 127.098086),
                            lat:37.551461
                        }
                    ];
                    // 마커 이미지의 이미지 주소입니다
                    var power=["진도:1.0","진도:2.0","진도:3.0","진도:4.0"];
                    var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 
                    for(var i=0;i<positions.length;i++){
                      // 마커 이미지의 이미지 크기 입니다
                      var imageSize = new kakao.maps.Size(24, 35); 
                                            
                      // 마커 이미지를 생성합니다    
                      var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
                      var markerPosition  = positions[i].latlng; 
                      var strong=power[i%4];
                      // 마커를 생성합니다
                      var marker = new kakao.maps.Marker({
                          position: markerPosition,
                          image : markerImage
                      });

                      // 마커가 지도 위에 표시되도록 설정합니다
                      marker.setMap(map);

                      var iwContent = '<div id=info>'+positions[i].title+'<br>'+strong+'<br>위도:'+positions[i].lat, // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
                          iwPosition = positions[i].latlng; //인포윈도우 표시 위치입니다

                      // 인포윈도우를 생성합니다
                      var infowindow = new kakao.maps.InfoWindow({
                          position : iwPosition, 
                          content : iwContent 
                      });
                        
                      // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
                      infowindow.open(map, marker); 
                    }
                    </script>
                    
            </div> 
            
            </div>          

                
        

        <div class="clearfix"></div> 
        
        <div class="footer">
          <hr id ="footer-hr" size = "1">
          <p>문의 이메일<br>info@ssu.com<br>Copyright &copy; 본 홈페이지에 대한 모든 권리는 닭한마리 팀에게 귀속됩니다.<br></p>
          <hr id ="footer-hr" size = "1">
      </div>
</body>
</html>